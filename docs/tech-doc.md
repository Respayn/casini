
# Техническая документация

## Цель
Хранить информацию о внутреннем устройстве системы, API, алгоритмах

## Правила заполнения
- Документ должен обновляться с каждым изменением, влияющим на систему.
- Фиксируем важные технические решения, даже если они кажутся очевидными сейчас.
- Если код сильно меняется, старый вариант нужно сохранять в разделе “История изменений”.
- Если появились новые API, схемы БД, алгоритмы, их нужно документировать сразу.
- Используем графики, диаграммы, примеры кода для наглядности.

## Когда заполнять?
- Заполняется, когда изменяется архитектура, API или алгоритмы.
- При добавлении новых модулей, API, БД.
- При изменении логики работы существующего кода.
- Перед релизом крупного обновления.
- Если принято важное техническое решение (даже если оно еще не реализовано).

## Пример рабочего процесса
- Разработчик добавил новый API
- Перед коммитом обновил tech-doc.md (описание эндпоинтов) 
- В PR указал, что документация обновлена.


## Организация классов и потоков данных в коде
1. Сырые данные хранятся в источнике данных (БД, файл, API).
2. Для получения данных из источника используется слой репозитория.
3. Репозитории получают данные и преобразуют их в бизнес сущности. Для представления бизнес сущностей используем Spatie Data Transfer Objects (DTO).
4. Репозитории не содержат бизнес-логики, только методы получения, сохранения, удаления и преобразования данных.
5. Для получения данных из репозитория используется слой сервисов.
6. Сервисы содержат бизнес-логику.
7. К сервисам обращаются контроллеры, компоненты или другие сервисы.
8. Данные из контроллеров или компонентов передаются в шаблоны (View)

## Поток данных
Поток данных можно представить в виде схемы:

**Запрос:**
`View -> Controller -> Service -> Repository -> Data Source`


**Ответ:**
`Data Source -> Repository -> Service -> Controller -> View`

## Тестирование
При таком подходе тесты пишем на слой сервисов, моки и стабы на слой репозиториев.
